<?xml version="1.0.1" encoding="utf-8"?>
<extension type="module" method="upgrade" client="site">
    <name>Call Now Button</name>
    <author>Mostafa Afrouzi</author>
    <creationDate>2025-11-20</creationDate>
    <copyright>Copyright (C) 2025 Mostafa Afrouzi. All rights reserved.</copyright>
    <license>GNU General Public License version 2 or later</license>
    <authorEmail>mostafa.afrouzi@gmail.com</authorEmail>
    <authorUrl>https://afrouzi.ir</authorUrl>
    <version>1.0.1</version>
    <description><![CDATA[Professional floating call-to-action button module for Joomla. Supports phone calls, WhatsApp, custom URLs with extensive customization options. Developed by Mostafa Afrouzi - afrouzi.ir]]></description>
    
    <namespace path="src">Joomla\Module\CallNowButton</namespace>
    
    <files>
        <folder>src</folder>
        <folder>tmpl</folder>
        <folder>media</folder>
        <folder>language</folder>
        <folder>admin</folder>
        <filename module="mod_callnowbutton">mod_callnowbutton.php</filename>
        <filename>helper.php</filename>
        <filename>services/provider.php</filename>
        <filename>items.xml</filename>
        <filename>script.php</filename>
    </files>
    
    <languages folder="language">
        <language tag="en-GB">en-GB/mod_callnowbutton.ini</language>
        <language tag="en-GB">en-GB/mod_callnowbutton.sys.ini</language>
        <language tag="fa-IR">fa-IR/mod_callnowbutton.ini</language>
        <language tag="fa-IR">fa-IR/mod_callnowbutton.sys.ini</language>
    </languages>
    
    <administration>
        <languages folder="language">
            <language tag="en-GB">en-GB/mod_callnowbutton.ini</language>
            <language tag="en-GB">en-GB/mod_callnowbutton.sys.ini</language>
            <language tag="fa-IR">fa-IR/mod_callnowbutton.ini</language>
            <language tag="fa-IR">fa-IR/mod_callnowbutton.sys.ini</language>
        </languages>
    </administration>
    
    <media destination="mod_callnowbutton" folder="media">
        <folder>css</folder>
        <folder>js</folder>
    </media>
    
    <config>
        <fields name="params">
            <fieldset name="basic" label="MOD_CALLNOWBUTTON_BASIC_FIELDSET_LABEL" addfieldpath="/modules/mod_callnowbutton/admin/fields">
                <field
                    name="active"
                    type="radio"
                    label="MOD_CALLNOWBUTTON_ACTIVE_LABEL"
                    description="MOD_CALLNOWBUTTON_ACTIVE_DESC"
                    default="1"
                    class="btn-group btn-group-yesno">
                    <option value="1">JYES</option>
                    <option value="0">JNO</option>
                </field>
                
                <field
                    name="button_type"
                    type="list"
                    label="MOD_CALLNOWBUTTON_BUTTON_TYPE_LABEL"
                    description="MOD_CALLNOWBUTTON_BUTTON_TYPE_DESC"
                    default="single">
                    <option value="single">MOD_CALLNOWBUTTON_BUTTON_TYPE_SINGLE</option>
                    <option value="multibutton">MOD_CALLNOWBUTTON_BUTTON_TYPE_MULTIBUTTON</option>
                </field>
                
                <field
                    name="link_type"
                    type="list"
                    label="MOD_CALLNOWBUTTON_LINK_TYPE_LABEL"
                    description="MOD_CALLNOWBUTTON_LINK_TYPE_DESC"
                    default="phone"
                    showon="button_type:single">
                    <option value="phone">MOD_CALLNOWBUTTON_LINK_TYPE_PHONE</option>
                    <option value="whatsapp">MOD_CALLNOWBUTTON_LINK_TYPE_WHATSAPP</option>
                    <option value="custom">MOD_CALLNOWBUTTON_LINK_TYPE_CUSTOM</option>
                </field>
                
                <field
                    name="phone_number"
                    type="text"
                    label="MOD_CALLNOWBUTTON_PHONE_NUMBER_LABEL"
                    description="MOD_CALLNOWBUTTON_PHONE_NUMBER_DESC"
                    default=""
                    hint="989123456789"
                    showon="button_type:single;link_type:whatsapp,phone"
                />
                <field
                    name="phone_number_whatsapp_hint"
                    type="note"
                    label="MOD_CALLNOWBUTTON_PHONE_NUMBER_WHATSAPP_HINT"
                    class="text-danger small"
                    filter="raw"
                    showon="button_type:single;link_type:whatsapp"
                />
                
                <field
                    name="custom_url"
                    type="url"
                    label="MOD_CALLNOWBUTTON_CUSTOM_URL_LABEL"
                    description="MOD_CALLNOWBUTTON_CUSTOM_URL_DESC"
                    default=""
                    hint="https://example.com or tel:+1234567890"
                    showon="button_type:single;link_type:custom"
                />
                
                <field
                    name="custom_url_target"
                    type="radio"
                    label="MOD_CALLNOWBUTTON_CUSTOM_URL_TARGET_LABEL"
                    description="MOD_CALLNOWBUTTON_CUSTOM_URL_TARGET_DESC"
                    default="0"
                    class="btn-group"
                    showon="button_type:single;link_type:custom">
                    <option value="0">MOD_CALLNOWBUTTON_TARGET_SAME</option>
                    <option value="1">MOD_CALLNOWBUTTON_TARGET_BLANK</option>
                </field>
                
                <field
                    name="custom_url_rel"
                    type="list"
                    label="MOD_CALLNOWBUTTON_CUSTOM_URL_REL_LABEL"
                    description="MOD_CALLNOWBUTTON_CUSTOM_URL_REL_DESC"
                    default=""
                    showon="button_type:single;link_type:custom">
                    <option value="">MOD_CALLNOWBUTTON_REL_NONE</option>
                    <option value="nofollow">MOD_CALLNOWBUTTON_REL_NOFOLLOW</option>
                    <option value="noopener">MOD_CALLNOWBUTTON_REL_NOOPENER</option>
                    <option value="noreferrer">MOD_CALLNOWBUTTON_REL_NOREFERRER</option>
                    <option value="nofollow noopener">MOD_CALLNOWBUTTON_REL_NOFOLLOW_NOOPENER</option>
                    <option value="nofollow noreferrer">MOD_CALLNOWBUTTON_REL_NOFOLLOW_NOREFERRER</option>
                    <option value="noopener noreferrer">MOD_CALLNOWBUTTON_REL_NOOPENER_NOREFERRER</option>
                    <option value="nofollow noopener noreferrer">MOD_CALLNOWBUTTON_REL_NOFOLLOW_NOOPENER_NOREFERRER</option>
                </field>
                
                <field
                    name="button_icon"
                    type="iconselector"
                    label="MOD_CALLNOWBUTTON_BUTTON_ICON_LABEL"
                    description="MOD_CALLNOWBUTTON_BUTTON_ICON_DESC"
                    default="phone"
                    showon="button_type:single"
                />
                
                <field
                    name="button_icon_custom"
                    type="media"
                    directory=""
                    label="MOD_CALLNOWBUTTON_BUTTON_ICON_CUSTOM_LABEL"
                    description="MOD_CALLNOWBUTTON_BUTTON_ICON_CUSTOM_DESC"
                    showon="button_type:single"
                />
                
                <field
                    name="button_text"
                    type="text"
                    label="MOD_CALLNOWBUTTON_BUTTON_TEXT_LABEL"
                    description="MOD_CALLNOWBUTTON_BUTTON_TEXT_DESC"
                    default=""
                    hint="Call Now"
                    showon="button_type:single"
                />
                
                <field
                    name="main_button_text"
                    type="text"
                    label="MOD_CALLNOWBUTTON_MAIN_BUTTON_TEXT_LABEL"
                    description="MOD_CALLNOWBUTTON_MAIN_BUTTON_TEXT_DESC"
                    default=""
                    hint="WhatsApp"
                    showon="button_type:multibutton"
                />
                
                <field
                    name="main_button_icon"
                    type="iconselector"
                    label="MOD_CALLNOWBUTTON_MAIN_BUTTON_ICON_LABEL"
                    description="MOD_CALLNOWBUTTON_MAIN_BUTTON_ICON_DESC"
                    default="phone"
                    showon="button_type:multibutton"
                />
                
                <field
                    name="main_button_icon_custom"
                    type="media"
                    directory=""
                    label="MOD_CALLNOWBUTTON_MAIN_BUTTON_ICON_CUSTOM_LABEL"
                    description="MOD_CALLNOWBUTTON_MAIN_BUTTON_ICON_CUSTOM_DESC"
                    showon="button_type:multibutton"
                />


                
                <field
                    name="multibutton_title_display"
                    type="radio"
                    label="MOD_CALLNOWBUTTON_MULTIBUTTON_TITLE_DISPLAY_LABEL"
                    description="MOD_CALLNOWBUTTON_MULTIBUTTON_TITLE_DISPLAY_DESC"
                    default="hover"
                    class="btn-group"
                    showon="button_type:multibutton">
                    <option value="none">MOD_CALLNOWBUTTON_TITLE_DISPLAY_NONE</option>
                    <option value="hover">MOD_CALLNOWBUTTON_TITLE_DISPLAY_HOVER</option>
                    <option value="always">MOD_CALLNOWBUTTON_TITLE_DISPLAY_ALWAYS</option>
                </field>
                
                <field
                    name="multibutton_tooltip_theme"
                    type="radio"
                    label="MOD_CALLNOWBUTTON_MULTIBUTTON_TOOLTIP_THEME_LABEL"
                    description="MOD_CALLNOWBUTTON_MULTIBUTTON_TOOLTIP_THEME_DESC"
                    default="dark"
                    class="btn-group"
                    showon="button_type:multibutton">
                    <option value="light">MOD_CALLNOWBUTTON_TOOLTIP_THEME_LIGHT</option>
                    <option value="dark">MOD_CALLNOWBUTTON_TOOLTIP_THEME_DARK</option>
                </field>
                
                <field
                    name="multibutton_items"
                    type="subform"
                    formsource="modules/mod_callnowbutton/items.xml"
                    multiple="true"
                    label="MOD_CALLNOWBUTTON_MULTIBUTTON_ITEMS_LABEL"
                    description="MOD_CALLNOWBUTTON_MULTIBUTTON_ITEMS_DESC"
                    showon="button_type:multibutton"
                />
            </fieldset>
            
            <fieldset name="presentation" label="MOD_CALLNOWBUTTON_PRESENTATION_FIELDSET_LABEL">
                <!-- Moved from Visibility: Display Mode -->
                <field
                    name="display_mode"
                    type="radio"
                    label="MOD_CALLNOWBUTTON_DISPLAY_MODE_LABEL"
                    description="MOD_CALLNOWBUTTON_DISPLAY_MODE_DESC"
                    default="all"
                    class="btn-group">
                    <option value="all">MOD_CALLNOWBUTTON_DISPLAY_MODE_ALL</option>
                    <option value="mobile_only">MOD_CALLNOWBUTTON_DISPLAY_MODE_MOBILE_ONLY</option>
                    <option value="desktop_only">MOD_CALLNOWBUTTON_DISPLAY_MODE_DESKTOP_ONLY</option>
                </field>

                <field
                    name="appearance"
                    type="radio"
                    label="MOD_CALLNOWBUTTON_APPEARANCE_LABEL"
                    description="MOD_CALLNOWBUTTON_APPEARANCE_DESC"
                    default="single"
                    class="btn-group">
                    <option value="single">MOD_CALLNOWBUTTON_APPEARANCE_SINGLE</option>
                    <option value="icontext">MOD_CALLNOWBUTTON_APPEARANCE_ICON_TEXT</option>
                </field>

                
                
                <field
                    name="position"
                    type="list"
                    label="MOD_CALLNOWBUTTON_POSITION_LABEL"
                    description="MOD_CALLNOWBUTTON_POSITION_DESC"
                    default="bottom-right"
                    showon="appearance:single,icontext">
                    <option value="bottom-left">MOD_CALLNOWBUTTON_POSITION_BOTTOM_LEFT</option>
                    <option value="bottom-center">MOD_CALLNOWBUTTON_POSITION_BOTTOM_CENTER</option>
                    <option value="bottom-right">MOD_CALLNOWBUTTON_POSITION_BOTTOM_RIGHT</option>
                    <option value="top-left">MOD_CALLNOWBUTTON_POSITION_TOP_LEFT</option>
                    <option value="top-center">MOD_CALLNOWBUTTON_POSITION_TOP_CENTER</option>
                    <option value="top-right">MOD_CALLNOWBUTTON_POSITION_TOP_RIGHT</option>
                    <option value="middle-left">MOD_CALLNOWBUTTON_POSITION_MIDDLE_LEFT</option>
                    <option value="middle-right">MOD_CALLNOWBUTTON_POSITION_MIDDLE_RIGHT</option>
                    <!-- Full width positions available when using Icon with Text -->
                    <option value="full-bottom">MOD_CALLNOWBUTTON_POSITION_FULL_BOTTOM</option>
                    <option value="full-top">MOD_CALLNOWBUTTON_POSITION_FULL_TOP</option>
                </field>
                
                <field
                    name="button_color"
                    type="color"
                    label="MOD_CALLNOWBUTTON_BUTTON_COLOR_LABEL"
                    description="MOD_CALLNOWBUTTON_BUTTON_COLOR_DESC"
                    default="#25D366"
                />
                
                <field
                    name="icon_color"
                    type="color"
                    label="MOD_CALLNOWBUTTON_ICON_COLOR_LABEL"
                    description="MOD_CALLNOWBUTTON_ICON_COLOR_DESC"
                    default="#FFFFFF"
                />
                
                <field
                    name="button_size"
                    type="slider"
                    label="MOD_CALLNOWBUTTON_BUTTON_SIZE_LABEL"
                    description="MOD_CALLNOWBUTTON_BUTTON_SIZE_DESC"
                    default="1"
                    min="0.85"
                    max="1.25"
                    step="0.05"
                    showon="appearance:single,icontext"
                />
                
                <field
                    name="responsive_size_enabled"
                    type="radio"
                    label="MOD_CALLNOWBUTTON_RESPONSIVE_SIZE_ENABLED_LABEL"
                    description="MOD_CALLNOWBUTTON_RESPONSIVE_SIZE_ENABLED_DESC"
                    default="0"
                    class="btn-group btn-group-yesno"
                    showon="appearance:single,icontext">
                    <option value="1">JYES</option>
                    <option value="0">JNO</option>
                </field>
                
                <field
                    name="size_desktop"
                    type="slider"
                    label="MOD_CALLNOWBUTTON_SIZE_DESKTOP_LABEL"
                    description="MOD_CALLNOWBUTTON_SIZE_DESKTOP_DESC"
                    default="1"
                    min="0.9"
                    max="2"
                    step="0.05"
                    showon="responsive_size_enabled:1"
                />

                <field
                    name="size_tablet"
                    type="slider"
                    label="MOD_CALLNOWBUTTON_SIZE_TABLET_LABEL"
                    description="MOD_CALLNOWBUTTON_SIZE_TABLET_DESC"
                    default="1"
                    min="0.9"
                    max="1.2"
                    step="0.05"
                    showon="responsive_size_enabled:1"
                />

                <field
                    name="size_tablet_landscape"
                    type="slider"
                    label="MOD_CALLNOWBUTTON_SIZE_TABLET_LANDSCAPE_LABEL"
                    description="MOD_CALLNOWBUTTON_SIZE_TABLET_LANDSCAPE_DESC"
                    default="1"
                    min="0.9"
                    max="1.2"
                    step="0.05"
                    showon="responsive_size_enabled:1"
                />

                <field
                    name="size_mobile"
                    type="slider"
                    label="MOD_CALLNOWBUTTON_SIZE_MOBILE_LABEL"
                    description="MOD_CALLNOWBUTTON_SIZE_MOBILE_DESC"
                    default="0.95"
                    min="0.85"
                    max="1.15"
                    step="0.05"
                    showon="responsive_size_enabled:1"
                />

                <field
                    name="size_mobile_landscape"
                    type="slider"
                    label="MOD_CALLNOWBUTTON_SIZE_MOBILE_LANDSCAPE_LABEL"
                    description="MOD_CALLNOWBUTTON_SIZE_MOBILE_LANDSCAPE_DESC"
                    default="1"
                    min="0.85"
                    max="1.15"
                    step="0.05"
                    showon="responsive_size_enabled:1"
                />
                
                <field
                    name="button_margin"
                    type="number"
                    label="MOD_CALLNOWBUTTON_BUTTON_MARGIN_LABEL"
                    description="MOD_CALLNOWBUTTON_BUTTON_MARGIN_DESC"
                    default="20"
                    min="0"
                    max="200"
                    step="1"
                    unit="px"
                    showon="appearance:single,icontext"
                />
                
                <field
                    name="animation"
                    type="list"
                    label="MOD_CALLNOWBUTTON_ANIMATION_LABEL"
                    description="MOD_CALLNOWBUTTON_ANIMATION_DESC"
                    default="none"
                    showon="appearance:single,icontext">
                    <option value="none">MOD_CALLNOWBUTTON_ANIMATION_NONE</option>
                    <option value="pulse">MOD_CALLNOWBUTTON_ANIMATION_PULSE</option>
                    <option value="bounce">MOD_CALLNOWBUTTON_ANIMATION_BOUNCE</option>
                    <option value="shake">MOD_CALLNOWBUTTON_ANIMATION_SHAKE</option>
                </field>

                <!-- Icon with Text typography -->
                <field
                    name="icontext_font_size"
                    type="slider"
                    label="MOD_CALLNOWBUTTON_ICONTEXT_FONT_SIZE_LABEL"
                    description="MOD_CALLNOWBUTTON_ICONTEXT_FONT_SIZE_DESC"
                    default="14"
                    min="10"
                    max="20"
                    step="1"
                    showon="appearance:icontext"
                />

                <field
                    name="icontext_font_color"
                    type="color"
                    label="MOD_CALLNOWBUTTON_ICONTEXT_FONT_COLOR_LABEL"
                    description="MOD_CALLNOWBUTTON_ICONTEXT_FONT_COLOR_DESC"
                    default="#FFFFFF"
                    showon="appearance:icontext"
                />

                <field
                    name="icontext_font_weight"
                    type="list"
                    label="MOD_CALLNOWBUTTON_ICONTEXT_FONT_WEIGHT_LABEL"
                    description="MOD_CALLNOWBUTTON_ICONTEXT_FONT_WEIGHT_DESC"
                    default="600"
                    showon="appearance:icontext">
                    <option value="400">400 - Normal</option>
                    <option value="500">500 - Medium</option>
                    <option value="600">600 - Semibold</option>
                    <option value="700">700 - Bold</option>
                    <option value="800">800 - Extra Bold</option>
                    <option value="900">900 - Black</option>
                </field>

                <!-- Icon with Text - icon sizing -->
                <field
                    name="icontext_icon_size"
                    type="slider"
                    label="MOD_CALLNOWBUTTON_ICONTEXT_ICON_SIZE_LABEL"
                    description="MOD_CALLNOWBUTTON_ICONTEXT_ICON_SIZE_DESC"
                    default="20"
                    min="14"
                    max="32"
                    step="1"
                    showon="appearance:icontext"
                />

                <field
                    name="icontext_icon_circle"
                    type="slider"
                    label="MOD_CALLNOWBUTTON_ICONTEXT_ICON_CIRCLE_LABEL"
                    description="MOD_CALLNOWBUTTON_ICONTEXT_ICON_CIRCLE_DESC"
                    default="26"
                    min="18"
                    max="40"
                    step="1"
                    showon="appearance:icontext"
                />
                
                <field
                    name="z_index"
                    type="number"
                    label="MOD_CALLNOWBUTTON_Z_INDEX_LABEL"
                    description="MOD_CALLNOWBUTTON_Z_INDEX_DESC"
                    default="9999"
                    min="1"
                    max="99999"
                />
            </fieldset>
            
            <fieldset name="about" label="MOD_CALLNOWBUTTON_ABOUT_FIELDSET_LABEL">
                <field
                    name="about_developer"
                    type="note"
                    label="MOD_CALLNOWBUTTON_ABOUT_DEVELOPER_LABEL"
                    description="MOD_CALLNOWBUTTON_ABOUT_DEVELOPER_DESC"
                    class="text-center"
                />
                
                <field
                    name="about_services"
                    type="note"
                    label="MOD_CALLNOWBUTTON_ABOUT_SERVICES_LABEL"
                    description="MOD_CALLNOWBUTTON_ABOUT_SERVICES_DESC"
                    class="text-center"
                />
                
                <field
                    name="about_contact"
                    type="note"
                    label="MOD_CALLNOWBUTTON_ABOUT_CONTACT_LABEL"
                    description="MOD_CALLNOWBUTTON_ABOUT_CONTACT_DESC"
                    class="text-center"
                />
            </fieldset>
            
            <!-- Visibility fieldset removed -->
            
        </fields>
    </config>
    
    <changelogurl>https://raw.githubusercontent.com/mostafaafrouzi/joomla-call-now-button/main/updates/changelog.xml</changelogurl>
    
    <updateservers>
        <server type="extension" name="Call Now Button Updates">https://raw.githubusercontent.com/mostafaafrouzi/joomla-call-now-button/main/updates/updates.xml</server>
    </updateservers>
</extension>

